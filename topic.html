<!DOCTYPE html>

<html lang="fa">
<meta content="text/html;charset=utf-8" http-equiv="content-type"/>
<head><title> UpToDate-2024 by Z</title>
  <link href="/d/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="/d/css/classy-nav.min.css" rel="stylesheet"/>
  <link href="/d/css/style.css" rel="stylesheet"/>
  <script language="javascript" type="text/javascript"></script>
<meta content="DtrOqoJQaN1qcAKfwjN8FRkcWvwVElVss9Aaz7Xk" name="_token"/>
<style>
  
.m4inb{
  border: solid !important;
}

.newsletter-area::before {
     background: unset !important;
}
#myUL {
  list-style-type: none;
  padding: 0;
  margin: 0;
}

#myUL li a {
  border: 1px solid #ddd;
  margin-top: -1px; /* Prevent double borders */
  background-color: #f6f6f6;
  padding: 12px;
  text-decoration: none;
  font-size: 16px;
  color: black;
  display: block
}

#myUL li a:hover:not(.header) {
  background-color: #eee;
}

#searchResult {

  list-style-type: none;
  padding: 0;
  padding-right: 20px;
}

#searchResult li a {
  border: .5px solid #ddd;
  margin-top: -1px; /* Prevent double borders */
  background-color: #79bc21;
  padding: 7px;
  text-decoration: none;
  font-size: 14px;
  color: white;
  display: block
}

#searchResult li a:hover:not(.header) {
  background-color: #222;
}


#txtHint   {
  position: absolute;
  text-shadow: none;
  width: 100%;
  margin-top: -15px;
  padding-right: 10px;

  filter: alpha(opacity=95);
  -moz-opacity: 0.95;
  opacity: 1;
  z-index: 200;
}
.countBubl {
  background:#eb0029;
  color:#fff;
  padding:5px;
  margin-top: 50%;

}
.uptodate-area > div:nth-child(1) > div:nth-child(1) > div:nth-child(1) > span:nth-child(1) > img:nth-child(2) {
 width: 55%;
 padding-left: 20px;
}
.uptodate-area > div:nth-child(1) > div:nth-child(1) > div:nth-child(1) > span:nth-child(1) > img:nth-child(3) {
 width: 20%;
}
 #Uptodate_image {
      width: 50%;
  }

#uptodate-area > div:nth-child(1) > div:nth-child(1) > div:nth-child(1) > div:nth-child(2) {
 margin-left: 10px;
 margin-bottom: 6%;
}
@media (max-width: screen-xs) {
    .countBubl {
        font-size: 4px ;
    }
    #uptodate_version {
        font-size: 4px ;
    }
}

@media (max-width: screen-sm) {
    .countBubl {
        font-size: 14px ;
    }
}
@media  all and(max-width: 820) {
    #Uptodate_image {
        width: 80% ;
    }#uptodate-area {
        z-index: 99;
    }
}@media  all and (min-width: 820) and(max-width: 88820){
    #Uptodate_image {
        width: 100% !important;
    }
    .countBubl {
        font-size: 4px ;
    }
}
div.col-md-3:nth-child(3) {
 margin-top: 6%;
}

div.col-md-3:nth-child(3) > img:nth-child(1) {
 width: 100%;
 margin-left: 11px;
}

</style>
<style media="screen" type="text/css">
  .selections {
    border:1px solid black !important;
    padding: 10px !important;
    margin: 10px !important;
    box-align: stretch !important;
    border-radius:50px 100px 25px !important;
    background-color: #15d204 !important;
    font-size: large !important;
  }
  
  .goback {
    width: 200px;
    height: 40px;
    line-height: 40px;
    position: fixed;
    display: none;
    font-size: 15px;
    background: #71c0fa;
    z-index: 1000;
    text-align: center;
    color: #ffffff;
    -webkit-border-radius: 1px;
    -moz-border-radius: 1px;
    border-radius: 50px;
    bottom: 3.8%;
    right: 2%;
}
  .buyPackage {
  width: 100px;
  height: 100px;
  line-height: 40px;
  position: fixed;
  display: none;
  font-size: 10px;
  background: #fa759e;
  z-index: 1000;
  text-align: center;
  color: #ffffff;
  -webkit-border-radius: 1px;
  -moz-border-radius: 1px;
  border-radius: 10px;
  top: 150px;
  right: 2%;
  text-align: center;
}
.uptodate-area {
  /*background-image: url(../../assets/img/news-letter-bg.jpg);*/
  background-position: center center;
  background-size: cover;
  background-repeat: no-repeat;
    background-attachment: fixed;
  position: relative;
}
.uptodate-area::before {
  content: '';
  position: absolute;
  left: 0;
  padding-top: 100px;
  width: 100%;
}
</style>
<style>
section.sticky {
  position: sticky;
  top: 0;
  background-color: #fff !important;
  /*z-index: 100;*/
  /*padding-top: 80px;*/

}
.loading-image {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 10;
}
.loader
{
    display: none;
    width:32em;
    height: 200px;
    position: fixed;
    top: 50%;
    left: 45%;
    text-align:center;
    margin-left: -50px;
    margin-top: -100px;
    z-index:200;
    overflow: hidden;
    border-radius: 20px;
    background-color: #71c0fa;
}
.loaderI {
  border: 16px solid #f3f3f3;
  border-radius: 50%;
  border-top: 16px solid #3498db;
  width: 120px;
  height: 120px;
  -webkit-animation: spin 2s linear infinite; /* Safari */
  animation: spin 2s linear infinite;
}


/* Safari */
@-webkit-keyframes spin {
  0% { -webkit-transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); }
}

@keyframes  spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
</style>
<style>
</style>

</head>
<body>
  <section class="uptodate-area sticky" id="uptodate-area" style="z-index: 999; padding: 0px; margin-top: 0px;">
    <div class="container">
        <div class="newsletter">
            <div class="row">
                  <div class="col-md-2 col-2"></div>
                  <div class="col-md-2 col-2" style=" margin-top: 3%;margin-bottom: 3%;">
                    <a href="/index.html" title="">
                      <img id="Uptodate_image" style="width: 80px" src="/imgs/UpToDate.png">&nbsp;&nbsp;
                    </a>
                  </div>
                  <div class="col-md-3 col-3" style=" margin-bottom: 5%;">
                    <a href="/index.html" title="">
                      <img id="Uptodate_image" style="width: 200px" src="/imgs/uptodate-logo (1).png">
                    </a>
                  </div>
                  <div class="col-md-3 col-3" style="margin-left: 0;margin-top: 5%;">
                    <span class="countBubl ui-btn-corner-all" id="uptodate_version" style="font-size: 1.5vw;">Version May 2024 by Z</span>
                  </div>
                  
                  <div class="col-md-1 col-1"></div>
            </div>
        </div>
    </div>
</section>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<section class="newsletter-area" style="padding-bottom: 30px;">
  <div class="container">
    <div class="row">

    <div class="col-lg-8 col-12"> 
      <div class="newsletter">
        <form class="row" method="get" accept-charset="utf-8" id="searchForm" novalidate="novalidate">
          <div class="col-md-9" style="margin-top: 50px">
            <input class="form-control m4inb" name="title" type="text" placeholder="Search" id="inputSearch">
          </div>
          <div class="col-md-3">
            <button onclick="findRelatedFiles(event)" type="submit" style="width:100%;margin-top: 50px" class="btn btn-primary">Search</button>
          </div>
        </form>
        
        <div id="results"></div>
        
        
        
        
      </div>
    </div>
    </div>
  </div>
</section>
<script type="text/javascript">

  // Hàm Jaro-Winkler
function jaroWinkler(a, b) {
  var m = 0;

  // Exit early if either are empty.
  if (a.length === 0 || b.length === 0) {
    return 0;
  }

  // Exit early if they're an exact match.
  if (a === b) {
    return 1;
  }

  var range = (Math.floor(Math.max(a.length, b.length) / 2)) - 1,
      aMatches = new Array(a.length),
      bMatches = new Array(b.length);

  for (var i = 0; i < a.length; i++) {
    var low = (i >= range) ? i - range : 0,
        high = (i + range <= (b.length - 1)) ? (i + range) : (b.length - 1);

    for (var j = low; j <= high; j++) {
      if (aMatches[i] !== true && bMatches[j] !== true && a[i] === b[j]) {
        ++m;
        aMatches[i] = bMatches[j] = true;
        break;
      }
    }
  }

  // Exit early if no matches were found.
  if (m === 0) {
    return 0;
  }

  // Count the transpositions.
  var k = n_trans = 0;

  for (var i = 0; i < a.length; i++) {
    if (aMatches[i] === true) {
      for (var j = k; j < b.length; j++) {
        if (bMatches[j] === true) {
          k = j + 1;
          break;
        }
      }

      if (a[i] !== b[j]) {
        ++n_trans;
      }
    }
  }

  var weight = (m / a.length + m / b.length + (m - (n_trans / 2)) / m) / 3,
      
      p = 0.5;
      l = 0;

  if (weight > 0.7) {
    while (a[l] === b[l] && l < 5) {
      ++l;
    }

    weight = weight + l * p * (1 - weight);
  }

  return weight;
}

// Hàm này sẽ được gọi khi người dùng nhập tiêu đề và nhấn enter
function findRelatedFiles(event) {
  event.preventDefault();
  var input = document.getElementById('inputSearch').value;

  fetch('/d/trans.json')
      .then(response => response.json())
      .then(jsonData => {
          var inputWords = input.split(' ');

          var relatedFiles = Object.keys(jsonData)
              .map(function(fileName) {
                  var titleWords = jsonData[fileName].split(' ');
                  var commonWordsCount = titleWords.filter(word => inputWords.includes(word)).length;
                  var similarity = jaroWinkler(jsonData[fileName], input);
                  return { fileName, score: commonWordsCount + similarity };
              })
              .filter(file => file.score > 0)
              .sort((a, b) => b.score - a.score)
              .slice(0, 35)  // Giới hạn kết quả chỉ cần trả về 25 câu trả lời tương đồng nhất
              .map(file => file.fileName);
          // Tạo và hiển thị danh sách các div
          var resultsDiv = document.getElementById('results');
          resultsDiv.innerHTML = '';
          relatedFiles.forEach(function(fileName) {
              var div = document.createElement('div');
              div.classList.add('selections'); // Thêm class CSS vào đây
              var link = document.createElement('a');
              link.href = '/d/html/' + fileName;
              link.textContent = jsonData[fileName];
              div.appendChild(link);
              resultsDiv.appendChild(div);
          });
      })
      .catch(error => console.error('Có lỗi xảy ra:', error));
}

</script>

</body>
</html>

<!DOCTYPE html>

<html lang="fa">
<meta content="text/html;charset=utf-8" http-equiv="content-type"/>
<head><title>Calculator: Caprini risk assessment model for venous thromboembolism in adult general surgical patients (Caprini risk score)*</title></head>
<body><section class="course-details-area ptb-60">
<div class="container">
<div class="uptodate2" style="padding:50px 0px 50px 0px;direction: ltr;text-align: left;">
<h1 style="text-align:center">Calculator: Caprini risk assessment model for venous thromboembolism in adult general surgical patients (Caprini risk score)*</h1>
<div class="utdArticleSection" id="topicContentCalculator"><div id="topicText">
<div id="mc3k">
<form action="" id="Caprini_form" name="Caprini_form" onkeydown="formKeyDown(event);" onkeypress="resetInTime(); return validNumberField(event);" onkeyup="Caprini_fx();" onreset="alerted5 = false; rrclr();rrclr(); document.getElementById('inputchk').innerHTML=inputchktxt; " onsubmit="return false;">
<table cellpadding="4" cellspacing="0" summary="EBMcalc Table" width="100%">
<tbody><tr><td bgcolor="#eeeeee" width="1%"><br/></td>
<td align="left" bgcolor="#eeeeee">
<span class="medCalcFontTitleBox">

 
Calculator: Caprini risk assessment model for venous thromboembolism in adult general surgical patients (Caprini risk score)<sup>*</sup>
</span></td></tr></tbody></table><br/> <br/>
<div id="calc_main">
<center>
<span class="medCalcFontIO">
Input
</span>
<br/> <br/>
<table cellpadding="3" cellspacing="0" summary="EBMcalc Table">
<tbody><tr><td align="right" valign="top"><span class="medCalcFontOneBold">Age</span></td>
<td align="left" colspan="2"><input aria-label="This button selects an option for the variable: Age. The variable option is 0 to 40 years. The value for this variable is 0" id="togel1" name="Age_radio" onclick="Caprini_fx();" type="radio" value="0 to 40 years|0"/><span class="medCalcFontOneClick" onclick="setRB('togel1');"> 0 to 40 years (0)</span></td></tr>
<tr><td align="left"><br/></td><td align="left" colspan="2"><input aria-label="This button selects an option for the variable: Age. The variable option is 41 to 60 years. The value for this variable is 1" id="togel2" name="Age_radio" onclick="Caprini_fx();" type="radio" value="41 to 60 years|1"/><span class="medCalcFontOneClick" onclick="setRB('togel2');"> 41 to 60 years (1)</span></td></tr>
<tr><td align="left"><br/></td><td align="left" colspan="2"><input aria-label="This button selects an option for the variable: Age. The variable option is 61 to 74 years. The value for this variable is 2" id="togel3" name="Age_radio" onclick="Caprini_fx();" type="radio" value="61 to 74 years|2"/><span class="medCalcFontOneClick" onclick="setRB('togel3');"> 61 to 74 years (2)</span></td></tr>
<tr><td align="left"><br/></td><td align="left" colspan="2"><input aria-label="This button selects an option for the variable: Age. The variable option is 75 years or older. The value for this variable is 3" id="togel4" name="Age_radio" onclick="Caprini_fx();" type="radio" value="75 years or older|3"/><span class="medCalcFontOneClick" onclick="setRB('togel4');"> 75 years or older (3)</span></td></tr>
<tr><td align="left" colspan="3"><span class="medCalcFontCCTabBold">Each of the following criteria that apply <b>now or within the past month</b>, receives 1 point:</span></td></tr>
<tr>
<td align="right"><input id="togel5" name="ec1" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel5');">Minor surgery (less than 45 minutes, including anesthesia time) is planned</span></td></tr>
<tr>
<td align="right"><input id="togel6" name="ec2" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel6');">Past major surgery (more than 45 minutes) within the last month</span></td></tr>
<tr>
<td align="right"><input id="togel7" name="ec3" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel7');">Visible varicose veins</span></td></tr>
<tr>
<td align="right"><input id="togel8" name="ec4" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel8');">History of active or inactive inflammatory bowel disease (IBD; eg, Crohn disease or ulcerative colitis)</span></td></tr>
<tr>
<td align="right"><input id="togel9" name="ec5" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel9');">Swollen legs (current), including pitting edema of any level, loss of definition of the bony prominences, obscured foot veins, or indentation of the leg when a stocking is removed</span></td></tr>
<tr>
<td align="right"><input id="togel10" name="ec6" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel10');">Overweight or obese (body mass index [BMI] above 25 kg/m<sup>2</sup>)</span></td></tr>
<tr>
<td align="right"><input id="togel11" name="ec7" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel11');">Heart attack</span></td></tr>
<tr>
<td align="right"><input id="togel12" name="ec8" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel12');">Heart failure (HF); includes patients who had an episode within the last month or patients who are currently being treated with medication for HF even if there was no acute episode in the last month</span></td></tr>
<tr>
<td align="right"><input id="togel13" name="ec9" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel13');">Serious infection, eg, pneumonia (a patient who requires hospitalization and intravenous antibiotics for treatment)</span></td></tr>
<tr>
<td align="right" valign="top"><input name="lung_diseases_param" onblur="Caprini_fx(); minMaxCheck();" onchange="Caprini_fx();" size="1" type="text" value="0"/></td>
<td align="left"><span class="medCalcFontCCTab">Enter number of lung diseases. Lung diseases eg, emphysema or COPD (also includes any interstitial lung disease and patients with abnormal pulmonary function tests. This would include, but is not limited to, any patient with sarcoidosis, pulmonary fibrosis, pulmonary hypertension, and bronchiectasis. (Patients who present with more than 1 diagnosis meeting the criteria for lung disease receive 1 point for each diagnosis).</span></td></tr>
<tr>
<td align="right"><input id="togel14" name="ec10" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel14');">On bed rest or restricted mobility,<sup>Δ</sup> including a removable leg brace, for less than 72 hours</span></td></tr>
<tr><td align="left" colspan="3"><span class="medCalcFontCCTabBold">Each of these other risk factors that apply <b>now or within the past month</b><sup>¶</sup> receives 1 point:</span></td></tr>
<tr>
<td align="right"><input id="togel15" name="ec11" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel15');">BMI above 40 kg/m<sup>2</sup></span></td></tr>
<tr>
<td align="right"><input id="togel16" name="ec12" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel16');">Smoking within the last month (smoking is defined as the inhalation of anything that burns [eg, tobacco, marijuana], or vaping)</span></td></tr>
<tr>
<td align="right"><input id="togel17" name="ec13" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel17');">Diabetes requiring insulin (does not include other oral or parenteral medications used for the treatment of diabetes)</span></td></tr>
<tr>
<td align="right"><input id="togel18" name="ec14" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel18');">Chemotherapy (includes chemotherapy treatments used for any medical condition (eg, methotrexate for rheumatoid arthritis, hydroxyurea for essential thrombocytosis)</span></td></tr>
<tr>
<td align="right"><input id="togel19" name="ec15" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel19');">Blood transfusion(s) (1 point for 1 or more transfusion)</span></td></tr>
<tr>
<td align="right"><input id="togel20" name="ec16" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel20');">Length of surgery over 2 hours (including anesthesia time). NOTE: this point is not counted if hip or knee replacement surgery is indicated below.</span></td></tr>
<tr><td align="left" colspan="3"><span class="medCalcFontCCTabBold"><b>For females only</b>: Each of the following criteria receives 1 point:</span></td></tr>
<tr>
<td align="right"><input id="togel21" name="ec17" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel21');">Current use of birth control or hormone replacement therapy (includes estrogen contraceptives of any type, estrogen-like drugs [eg, tamoxifen, anastrozole, letrozole]; does not include testosterone replacement therapy)</span></td></tr>
<tr>
<td align="right"><input id="togel22" name="ec18" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel22');">Pregnant or had a baby within the last month</span></td></tr>
<tr>
<td align="right"><input id="togel23" name="ec19" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel23');">History of unexplained stillborn infant, recurrent spontaneous abortion (3 or more), premature birth with toxemia or growth restricted infant</span></td></tr>
<tr><td align="left" colspan="3"><span class="medCalcFontCCTabBold">Each of the following criteria receives 2 points:</span></td></tr>
<tr>
<td align="right" valign="top"><input name="malignancies_param" onblur="Caprini_fx(); minMaxCheck();" onchange="Caprini_fx();" size="1" type="text" value="0"/></td>
<td align="left"><span class="medCalcFontCCTab">Enter number of current or past malignancies (excluding skin cancer but including melanoma; every incidence of cancer is considered  separately and points are additive) (Patients who present with more than 1 diagnosis meeting the criteria for current or past malignancies receive 2 points for each diagnosis).</span></td></tr>
<tr>
<td align="right"><input id="togel24" name="ec20" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel24');">Planned major surgery (including laparoscopic and arthroscopic) lasting longer than 45 minutes (including anesthesia time).  NOTE: these points are not counted if hip or knee replacement surgery is indicated below.</span></td></tr>
<tr>
<td align="right"><input id="togel25" name="ec21" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel25');">Nonremovable cast or mold that prevents leg movement within last month (includes any limitation of mobility which would interfere with calf muscle pumping action such as a leg brace or cast; also includes patients using crutches who are nonweightbearing on one leg. Does not include use of an assistive device for stability)</span></td></tr>
<tr>
<td align="right"><input id="togel26" name="ec22" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel26');">Tube in blood vessel in neck or chest that delivers blood or medicine directly to the heart within the last month (eg, central venous access, PICC line, port)</span></td></tr>
<tr>
<td align="right"><input id="togel27" name="ec23" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel27');">Confined to bed<sup>Δ</sup> for 72 hours or more (unable to ambulate continuously 30 feet; does not include use of an assistive device for stability)</span></td></tr>
<tr><td align="left" colspan="3"><span class="medCalcFontCCTabBold">Each of the following criteria receives 3 points:</span></td></tr>
<tr>
<td align="right" valign="top"><input name="blood_clots_param" onblur="Caprini_fx(); minMaxCheck();" onchange="Caprini_fx();" size="1" type="text" value="0"/></td>
<td align="left"><span class="medCalcFontCCTab">Enter number of episodes of blood clots (includes: deep vein thrombosis (DVT), pulmonary embolism (PE); or superficial vein  thrombosis (SVT); does not include arterial clots unless the result of paradoxical embolism). Each episode is a separate event for scoring.  (Patients who present with more than 1 episode meeting the criteria for current or past history of blood clots receive 3 points for each diagnosis).</span></td></tr>
<tr>
<td align="right"><input id="togel28" name="ec24" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel28');">Family history of blood clots (includes first-, second-, and third-degree relatives.)</span></td></tr>
<tr>
<td align="right" valign="top"><input name="thrombophilia_markers_param" onblur="Caprini_fx(); minMaxCheck();" onchange="Caprini_fx();" size="1" type="text" value="0"/></td>
<td align="left"><span class="medCalcFontCCTab">Enter number of personal or family history of positive blood test indicating an increased risk of blood clotting  (eg, genetic or acquired thrombophilia). (Patients who present with more than 1 diagnosis meeting criteria for positive blood testing receive 3 points for each positive blood test). </span><ul class="medCalcFontOne"><li>Genetic (inherited) factors: Factor V Leiden/activated protein C resistance, antithrombin III deficiency, protein C and protein S deficiency, dysfibrinogenemia, 20210A prothrombin mutation.</li> <li>Acquired factors: lupus anticoagulant, antiphospholipid antibodies, myeloproliferative disorders [including thrombocytosis], disorders of plasminogen and plasmin activation,  heparin-induced thrombocytopenia, hyperviscosity syndromes, and homocysteinemia. HIV infection is an acquired thrombophilia. </li></ul><span></span></td></tr>
<tr><td align="left" colspan="3"><span class="medCalcFontCCTabBold">Each of the following criteria that apply <b>now or within the past month</b> receives 5 points:</span></td></tr>
<tr>
<td align="right" valign="top"><input name="number_ortho_surgeries_param" onblur="Caprini_fx(); minMaxCheck();" onchange="Caprini_fx();" size="1" type="text" value="0"/></td>
<td align="left"><span class="medCalcFontCCTab">Enter the number of elective hip or knee joint replacements (total or partial; points assessed for each surgical procedure [eg, bilateral arthroplasty = 10 points]). (Patients who present with more than 1 surgery meeting the criteria for elective hip or knee joint replacement receive 5 points for each surgery).</span></td></tr>
<tr>
<td align="right"><input id="togel29" name="ec25" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel29');">Broken hip, pelvis, or leg (fractures requiring surgical repair receive 5 points for the fracture and additional points for the surgery depending on time [eg, &gt;45 minutes] and type [eg, hip replacement], as well as points for any resulting restricted mobility (eg, cast placed)</span></td></tr>
<tr>
<td align="right"><input id="togel30" name="ec26" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel30');">Serious trauma (eg, multiple broken bones due to a fall or car accident)</span></td></tr>
<tr>
<td align="right"><input id="togel31" name="ec27" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel31');">Spinal cord injury resulting in paralysis</span></td></tr>
<tr>
<td align="right"><input id="togel32" name="ec28" onclick="Caprini_fx();" type="checkbox"/></td>
<td align="left" colspan="2"><span class="medCalcFontOneClick" onclick="togCB('togel32');">Stroke</span></td></tr>
</tbody></table>
</center>
<br/> <br/><center><span class="medCalcFontIO">Results<span class="medCalcFontOne" id="inputchk"><br/> <br/><b>Important:</b> Inputs must be complete to perform calculation. <br/></span></span>
<br/> <br/>
<table cellpadding="4" class="medCalcResultBox" summary="EBMcalc Table">
<tbody><tr><td colspan="3"> <br/></td></tr>
<tr>
<td align="right"><span class="medCalcFontResultParam">Caprini score</span></td>
<td nowrap="nowrap" valign="top">  <input aria-label="This output box will display the calculated value Caprini score" aria-readonly="true" name="Caprini_score_param" size="6" type="text"/></td>
<td align="left" valign="top"><span class="medCalcFontResultParam">
<select aria-label="Use this pulldown selector to set the unit of measure for the result value Caprini score" class="medCalcFontSelect" name="Caprini_score_unit" onchange="Caprini_fx();" style="width:115px;">
<option value="1|0|#">#</option>
<option value="1|0|index">index</option>
<option value="1|0|none">none</option>
<option value="1|0|number">number</option>
<option selected="selected" value="1|0|points">points</option>
<option value="1|0|score">score</option>
</select>
</span></td>
</tr>
<tr><td colspan="3"> <br/></td></tr>
</tbody></table>
</center><br/> <br/>
<div id="calc_buttons">
<center>
<span class="medCalcFontOne">
<input name="resetbutton" type="reset" value="Reset form"/>
</span>
</center>
</div>
<br/> <br/>
<div aria-label="This table highlights the result Estimated baseline risk (EBR) of VTE by risk category. No result is highlighted" id="rr1_tag" tabindex="0">
<table cellpadding="4" cellspacing="0" summary="EBMcalc Table" width="100%">
<tbody><tr><td bgcolor="#eeeeee" width="1%"><br/></td>
<td align="left" bgcolor="#eeeeee">
<span class="medCalcFontTitleBox">


Estimated baseline risk (EBR) of VTE by risk category
</span></td></tr></tbody></table><br/> <br/>
</div>
<center>
<table border="1" cellpadding="4" cellspacing="0" summary="RRTable">
<tbody><tr bgcolor="#ffffff">
<td align="center"><span class="medCalcFontOneBold"> Points</span></td>
<td align="center"><span class="medCalcFontOneBold">Risk category</span></td>
<td align="center"><span class="medCalcFontOneBold">EBR</span></td>
</tr>
<tr id="rr1_1"><td align="center" nowrap="nowrap"><span class="medCalcFontOneBold"> 0</span></td>
<td align="center"><span class="medCalcFontOne">Very low</span></td>
<td align="center"><span class="medCalcFontOne">&lt;0.5%</span></td>
</tr>
<tr id="rr1_2"><td align="center" nowrap="nowrap"><span class="medCalcFontOneBold"> 1 to 2</span></td>
<td align="center"><span class="medCalcFontOne">Low</span></td>
<td align="center"><span class="medCalcFontOne">1.5%</span></td>
</tr>
<tr id="rr1_3"><td align="center" nowrap="nowrap"><span class="medCalcFontOneBold"> 3 to 4</span></td>
<td align="center"><span class="medCalcFontOne">Moderate</span></td>
<td align="center"><span class="medCalcFontOne">3%</span></td>
</tr>
<tr id="rr1_4"><td align="center" nowrap="nowrap"><span class="medCalcFontOneBold"> 5 to 100</span></td>
<td align="center"><span class="medCalcFontOne">HIgh</span></td>
<td align="center"><span class="medCalcFontOne">≥6%</span></td>
</tr>
</tbody></table>
</center>
<br/> <br/>
</div><div id="pretextrefs">
 
</div>
<br/> <br/>
<div id="calc_hints">
<span class="medCalcFontOne">
</span>
</div>
<div id="calc_tables_above_notes">
</div>
<br/> <br/>
<div id="calc_notes">
<span class="medCalcFontOneBold">Notes</span>
<ul class="medCalcFontOne">
<li>* We use the Caprini Risk Assessment model for general, abdominal-pelvic, bariatric, vascular, and plastic and reconstructive surgery. See appropriate UpToDate text for other types of surgery (eg, orthopedic surgery, cancer surgery).</li>
<li>¶ These other risk factors have not been tested in validation studies but have been shown in the literature to be associated with thrombosis.</li>
<li>Δ Restricted mobility (bed rest) is defined as any individual who is unable to ambulate continuously more than 30 feet. It would also apply to any patient who is unable to ambulate using both legs (eg, nonweightbearing on 1 extremity even if able to ambulate 30 feet with crutches).</li>
<li><b>BMI</b>: body mass index; <b>EBR</b>: estimated baseline risk of venous thromboembolism; <b>PICC</b>: peripherally inserted central catheter; <b>VTE</b>: venous thromboembolism.</li>
</ul>
</div>
<div id="calc_tables">
</div>
<br/> <br/>
<div id="calc_refs">
<span class="medCalcFontRef"><b>References</b></span>
<ol>
<li><span class="medCalcFontRef"><a href="https://www.ncbi.nlm.nih.gov/pubmed/30939900" style="color: green; text-decoration: none;" target="_blank">Cronin M, Dengler N, Krauss ES, et al. Completion of the Updated Caprini Risk Assessment Model (2013 Version).  Clin Appl Thromb Hemost 2019; 25:1.</a></span></li>
<li><span class="medCalcFontRef"><a href="https://www.ncbi.nlm.nih.gov/pubmed/22315263" style="color: green; text-decoration: none;" target="_blank">Gould MK, Garcia DA, Wren SM, et al. Prevention of VTE in nonorthopedic surgical patients: antithrombotic therapy and prevention  of thrombosis, 9th ed: American College of Chest Physicians evidence-based clinical practical guidelines. Chest 2012; 141:e227S.</a></span></li>
</ol>
</div>
</form>
</div>
<span class="calculatorVendorId" id="T1678215863">
</span></div><div id="printDisclaimer">
<b>Only digits 0 to 9 and a single decimal point (".") are acceptable as numeric inputs. Attempted input of other characters into a numeric field may lead to an incorrect result.</b>
<p>
	Information on this page may not appear correctly if printed. </p>
</div>
<div id="disclaimerCalculator">
<div class="medCalcFontTwo">
<p class="header">Legal Notices and Disclaimer</p>
<p>
			All information contained in and produced by the EBMcalc system is provided
			for educational purposes only. This information should not be used for the diagnosis or treatment
			of any health problem or disease. 
			<b>THIS INFORMATION IS NOT INTENDED TO REPLACE CLINICAL JUDGMENT OR GUIDE INDIVIDUAL PATIENT CARE IN ANY MANNER.</b>
<a class="medCalcDisclaimerLink" href="/legal/ebmcalc-disclaimer">Click here for full notice and disclaimer.</a>
</p>
<p class="copy">EBMcalc is Copyright © 1998-2024 Foundation Internet Services, LLC</p>
</div>
</div><div id="topicVersionRevision">Topic 131707 Version 6.0</div></div>
</div>
</div>
</section><script>
/* <![CDATA[ */

var lastChar = '';

function log(i){
return Math.log(i) * Math.LOG10E;
}

function ln(i){
return Math.log(i);
}

function sq(i){
return i * i;
}

function sqr(i){
return Math.sqrt(i);
}


function power(x,y){
return Math.pow(x,y);
}

function eTo(x){
return Math.exp(x);
}


function fixDP(r, dps) {
if (isNaN(r)) return "NaN";
var msign = '';
if (r < 0) msign = '-';
x = Math.abs(r);
if (x > Math.pow(10, 21)) return msign + x.toString();
var m = Math.round(x * Math.pow(10, dps)).toString();
if (dps == 0) return msign + m;
while (m.length <= dps) m = "0" + m;
return msign + m.substring(0, m.length - dps) + "." + m.substring(m.length - dps);
}


function alertNaN(){
alert('This field is improperly formatted. You may only input the digits 0-9 and a decimal point.');
doCalc = false;
clrResults();
}

function validNumberField(event) {
var field = event.target;

if(field && field != 'undefined' && field.attributes.type.nodeValue && (field.attributes.type.nodeValue == 'number')) {
var val = field.value;
var charCode = event.charCode;
var key = String.fromCharCode(charCode);

if(charCode == 0 || charCode == 13) {
  return true;
}

if(key == ' ') {
alert('Numeric field cannot contain spaces.');
  return false;
}

if(key == '.') { return validDecimalPoint(val, key); }
if(key == '-') { return validMinus(val, key); }

if(isNaN(parseInt(key))) {
alertNaN();
return false;
}

return validFloat(val, key);
}
return true;
}

function validDecimalPoint(val, key) {
if(val.length == 0 && lastChar != '.') {
  lastChar = '.';
  return true;
}
if(val.indexOf('.') >= 0 || lastChar == '.') {
 alertNaN();
 return false;
}
if(validFloat(val, key)) {
 lastChar = key;
 return true;
}
lastChar = '';
return false;
}

function validMinus(val, key) {
if(val.length == 0) {
  return true;
}
if(val.length > 1) {
 alertNaN();
 return false;
}
return validFloat(val, key);
}


function validFloat(val, key) {
var currentVal = parseFloat(val + key);
if(isNaN(val + key) || isNaN(currentVal)) {
alertNaN();
return false;
}
return true;
}

function formKeyDown(event) {
var field = event.target;

resetInTime();

if(field && field != 'undefined' && field.attributes.type && field.attributes.type.nodeValue && (field.attributes.type.nodeValue == 'number')) {
  var val = field.value;
  var keyCode = event.keyCode;
  if(keyCode == 8 || keyCode == 127) {
    // backspace or delete
    if(lastChar == '.') {
      lastChar = '';
    }
    if(field.value.length == 3 && field.value[0] == '0' && field.value[1] == '.') {
      // this handles a backspace on an input like ".5", which is saved internally as "0.5"
      //   otherwise, if you leave the field after the backspace, it retains "0.5" as the value, most likely an iOS bug
      field.value = ''; 
    }
  }
}
clrResults();
}

function clrValue(field) {
 field.value = '';
 lastChar = '';
}

var currenttimeout;

function resetInTime(){
if (currenttimeout) clearTimeout(currenttimeout);
currenttimeout = setTimeout('minMaxCheck();', 2000);
}



var curelement;

function togCB(thisid){
thischeckbox = document.getElementById(thisid);
if (thischeckbox.checked){ thischeckbox.checked = false; }
else { thischeckbox.checked = true; }
Caprini_fx();
}

function setRB(thisid){
document.getElementById(thisid).checked = true;
Caprini_fx();
}


var calctxt = ''; 
var xmltxt = ''; 
var xmlresult = '';
var htmtxt = ''; 
var postNow = false;
var printing = false;
var interptxt = '';
var interphtm = '';
var interpxml = '';
var rbchk = false;
var inputchktxt = '<br />&nbsp;<br /><b>Important:</b> Inputs must be complete to perform calculation. <br />'


function aDelay(atxt, ffield){
with (document.Caprini_form){
clrResults();
ffield.value = '';
doCalc = false;
setTimeout(function(){ alert(atxt); }, 100);
document.getElementById('inputchk').innerHTML = inputchktxt;

}}


function Caprini_fx() {

with(document.Caprini_form){


doCalc = true;
Clinical_Factors = 0;
rbchk = false;
if (Age_radio[0].checked){ rbchk = true; Age = 0;  }
if (Age_radio[1].checked){ rbchk = true; Age = 1;  }
if (Age_radio[2].checked){ rbchk = true; Age = 2;  }
if (Age_radio[3].checked){ rbchk = true; Age = 3;  }
if (!rbchk) doCalc = false;
if (ec1.checked){
Clinical_Factors = Clinical_Factors + 1;
}
if (ec2.checked){
Clinical_Factors = Clinical_Factors + 1;
}
if (ec3.checked){
Clinical_Factors = Clinical_Factors + 1;
}
if (ec4.checked){
Clinical_Factors = Clinical_Factors + 1;
}
if (ec5.checked){
Clinical_Factors = Clinical_Factors + 1;
}
if (ec6.checked){
Clinical_Factors = Clinical_Factors + 1;
}
if (ec7.checked){
Clinical_Factors = Clinical_Factors + 1;
}
if (ec8.checked){
Clinical_Factors = Clinical_Factors + 1;
}
if (ec9.checked){
Clinical_Factors = Clinical_Factors + 1;
}
lung_diseases = parseFloat(lung_diseases_param.value);
if (ec10.checked){
Clinical_Factors = Clinical_Factors + 1;
}
if (ec11.checked){
Clinical_Factors = Clinical_Factors + 1;
}
if (ec12.checked){
Clinical_Factors = Clinical_Factors + 1;
}
if (ec13.checked){
Clinical_Factors = Clinical_Factors + 1;
}
if (ec14.checked){
Clinical_Factors = Clinical_Factors + 1;
}
if (ec15.checked){
Clinical_Factors = Clinical_Factors + 1;
}
if (ec16.checked){
Clinical_Factors = Clinical_Factors + 1;
}
if (ec17.checked){
Clinical_Factors = Clinical_Factors + 1;
}
if (ec18.checked){
Clinical_Factors = Clinical_Factors + 1;
}
if (ec19.checked){
Clinical_Factors = Clinical_Factors + 1;
}
malignancies = parseFloat(malignancies_param.value);
if (ec20.checked){
Clinical_Factors = Clinical_Factors + 2;
}
if (ec21.checked){
Clinical_Factors = Clinical_Factors + 2;
}
if (ec22.checked){
Clinical_Factors = Clinical_Factors + 2;
}
if (ec23.checked){
Clinical_Factors = Clinical_Factors + 2;
}
blood_clots = parseFloat(blood_clots_param.value);
if (ec24.checked){
Clinical_Factors = Clinical_Factors + 3;
}
thrombophilia_markers = parseFloat(thrombophilia_markers_param.value);
number_ortho_surgeries = parseFloat(number_ortho_surgeries_param.value);
if (ec25.checked){
Clinical_Factors = Clinical_Factors + 5;
}
if (ec26.checked){
Clinical_Factors = Clinical_Factors + 5;
}
if (ec27.checked){
Clinical_Factors = Clinical_Factors + 5;
}
if (ec28.checked){
Clinical_Factors = Clinical_Factors + 5;
}
dp = 0;
surg_sub1 = 0; surg_sub2 = 0;
if ((number_ortho_surgeries > 0) && ec16.checked) surg_sub1 = 1;
if ((number_ortho_surgeries > 0) && ec20.checked) surg_sub2 = 2;
Caprini_score =  Age + Clinical_Factors + lung_diseases + (malignancies * 2) + (blood_clots * 3) + (thrombophilia_markers * 3) + (number_ortho_surgeries * 5) - surg_sub1 - surg_sub2;

unit_parts = Caprini_score_unit.options[Caprini_score_unit.selectedIndex].value.split('|');
if (doCalc) Caprini_score_param.value = fixDP((Caprini_score - parseFloat(unit_parts[1])) / parseFloat(unit_parts[0]), dp);



if (Caprini_score < 5) alerted5 = false;
if ((!alerted5) && (Caprini_score >= 5) && doCalc){ alerted5 = true; alert('The Caprini score is now 5 points or more indicating high VTE risk'); }

if (doCalc){
rrclr();
if ((Caprini_score >= 0) && (Caprini_score <= 0)){ document.getElementById('rr1_1').bgColor = '#8ab2be';
interptxt = '\n\nEstimated baseline risk (EBR) of VTE by risk category:   Points: 0';
calctxt += '\n\nEstimated baseline risk (EBR) of VTE by risk category:   Points: 0';
xmltxt += '\n<Result_Interpretation>\nEstimated baseline risk (EBR) of VTE by risk category:\n Points: 0';
interptxt += '\n\nRisk category: Very low';
calctxt += '\n\nRisk category: Very low';
xmltxt += '\nRisk category: Very low\n';
interptxt += '\n\nEBR: &lt;0.5%';
calctxt += '\n\nEBR: &lt;0.5%';
xmltxt += '\nEBR: &lt;0.5%\n';
xmltxt = xmltxt + '<\/Result_Interpretation>';
}
if ((Caprini_score >= 1) && (Caprini_score <= 2)){ document.getElementById('rr1_2').bgColor = '#8ab2be';
interptxt = '\n\nEstimated baseline risk (EBR) of VTE by risk category:   Points: 1 to 2';
calctxt += '\n\nEstimated baseline risk (EBR) of VTE by risk category:   Points: 1 to 2';
xmltxt += '\n<Result_Interpretation>\nEstimated baseline risk (EBR) of VTE by risk category:\n Points: 1 to 2';
interptxt += '\n\nRisk category: Low';
calctxt += '\n\nRisk category: Low';
xmltxt += '\nRisk category: Low\n';
interptxt += '\n\nEBR: 1.5%';
calctxt += '\n\nEBR: 1.5%';
xmltxt += '\nEBR: 1.5%\n';
xmltxt = xmltxt + '<\/Result_Interpretation>';
}
if ((Caprini_score >= 3) && (Caprini_score <= 4)){ document.getElementById('rr1_3').bgColor = '#8ab2be';
interptxt = '\n\nEstimated baseline risk (EBR) of VTE by risk category:   Points: 3 to 4';
calctxt += '\n\nEstimated baseline risk (EBR) of VTE by risk category:   Points: 3 to 4';
xmltxt += '\n<Result_Interpretation>\nEstimated baseline risk (EBR) of VTE by risk category:\n Points: 3 to 4';
interptxt += '\n\nRisk category: Moderate';
calctxt += '\n\nRisk category: Moderate';
xmltxt += '\nRisk category: Moderate\n';
interptxt += '\n\nEBR: 3%';
calctxt += '\n\nEBR: 3%';
xmltxt += '\nEBR: 3%\n';
xmltxt = xmltxt + '<\/Result_Interpretation>';
}
if ((Caprini_score >= 5) && (Caprini_score <= 100)){ document.getElementById('rr1_4').bgColor = '#8ab2be';
interptxt = '\n\nEstimated baseline risk (EBR) of VTE by risk category:   Points: 5 to 100';
calctxt += '\n\nEstimated baseline risk (EBR) of VTE by risk category:   Points: 5 to 100';
xmltxt += '\n<Result_Interpretation>\nEstimated baseline risk (EBR) of VTE by risk category:\n Points: 5 to 100';
interptxt += '\n\nRisk category: HIgh';
calctxt += '\n\nRisk category: HIgh';
xmltxt += '\nRisk category: HIgh\n';
interptxt += '\n\nEBR: &ge;6%';
calctxt += '\n\nEBR: &ge;6%';
xmltxt += '\nEBR: &ge;6%\n';
xmltxt = xmltxt + '<\/Result_Interpretation>';
}
document.getElementById('rr1_tag').ariaLabel = interptxt;
interptxt = '';


}


}


if (doCalc) document.getElementById('inputchk').innerHTML = '';
else document.getElementById('inputchk').innerHTML = inputchktxt;


}

function minMaxCheck(){
if (printing) return;



with(document.Caprini_form){

if (lung_diseases_param.value && isNaN(lung_diseases_param.value)){ aDelay('This field is improperly formatted\n\nYou may only input the digits 0-9 and a decimal point', lung_diseases_param); }
if (lung_diseases_param.value && (lung_diseases < (0 - 0.00001))) {
lung_diseases = 0;
clrValue(lung_diseases_param);
lung_diseases_param.value = '0';
clrResults();
doCalc = false;
 alert("The minimum value for lung diseases is 0.");
}
if (lung_diseases_param.value && lung_diseases > 10) {
clrValue(lung_diseases_param);

lung_diseases_param.value = 0;

clrResults();
lung_diseases = 0;
doCalc = false;
 alert("The maximum value for lung diseases is 10.");
}
if (malignancies_param.value && isNaN(malignancies_param.value)){ aDelay('This field is improperly formatted\n\nYou may only input the digits 0-9 and a decimal point', malignancies_param); }
if (malignancies_param.value && (malignancies < (0 - 0.00001))) {
malignancies = 0;
clrValue(malignancies_param);
malignancies_param.value = '0';
clrResults();
doCalc = false;
 alert("The minimum value for malignancies is 0.");
}
if (malignancies_param.value && malignancies > 10) {
clrValue(malignancies_param);

malignancies_param.value = 0;

clrResults();
malignancies = 0;
doCalc = false;
 alert("The maximum value for malignancies is 10.");
}
if (blood_clots_param.value && isNaN(blood_clots_param.value)){ aDelay('This field is improperly formatted\n\nYou may only input the digits 0-9 and a decimal point', blood_clots_param); }
if (blood_clots_param.value && (blood_clots < (0 - 0.00001))) {
blood_clots = 0;
clrValue(blood_clots_param);
blood_clots_param.value = '0';
clrResults();
doCalc = false;
 alert("The minimum value for blood clots is 0.");
}
if (blood_clots_param.value && blood_clots > 10) {
clrValue(blood_clots_param);

blood_clots_param.value = 0;

clrResults();
blood_clots = 0;
doCalc = false;
 alert("The maximum value for blood clots is 10.");
}
if (thrombophilia_markers_param.value && isNaN(thrombophilia_markers_param.value)){ aDelay('This field is improperly formatted\n\nYou may only input the digits 0-9 and a decimal point', thrombophilia_markers_param); }
if (thrombophilia_markers_param.value && (thrombophilia_markers < (0 - 0.00001))) {
thrombophilia_markers = 0;
clrValue(thrombophilia_markers_param);
thrombophilia_markers_param.value = '0';
clrResults();
doCalc = false;
 alert("The minimum value for thrombophilia markers is 0.");
}
if (thrombophilia_markers_param.value && thrombophilia_markers > 10) {
clrValue(thrombophilia_markers_param);

thrombophilia_markers_param.value = 0;

clrResults();
thrombophilia_markers = 0;
doCalc = false;
 alert("The maximum value for thrombophilia markers is 10.");
}
if (number_ortho_surgeries_param.value && isNaN(number_ortho_surgeries_param.value)){ aDelay('This field is improperly formatted\n\nYou may only input the digits 0-9 and a decimal point', number_ortho_surgeries_param); }
if (number_ortho_surgeries_param.value && (number_ortho_surgeries < (0 - 0.00001))) {
number_ortho_surgeries = 0;
clrValue(number_ortho_surgeries_param);
number_ortho_surgeries_param.value = '0';
clrResults();
doCalc = false;
 alert("The minimum value for number ortho surgeries is 0.");
}
if (number_ortho_surgeries_param.value && number_ortho_surgeries > 10) {
clrValue(number_ortho_surgeries_param);

number_ortho_surgeries_param.value = 0;

clrResults();
number_ortho_surgeries = 0;
doCalc = false;
 alert("The maximum value for number ortho surgeries is 10.");
}


}

}

function clrResults(){


with(document.Caprini_form){

Caprini_score_param.value = '';

rrclr();

}

}

var Age = null,
lung_diseases = null,
malignancies = null,
blood_clots = null,
thrombophilia_markers = null,
number_ortho_surgeries = null,
Caprini_score = null,
param_value = null;










function rrclr(){
document.getElementById('rr1_1').bgColor = '';
document.getElementById('rr1_2').bgColor = '';
document.getElementById('rr1_3').bgColor = '';
document.getElementById('rr1_4').bgColor = '';
document.getElementById('rr1_tag').ariaLabel = "This table highlights the result Estimated baseline risk (EBR) of VTE by risk category. No result is highlighted"; interptxt = '';
}




/* ]]> */

/* <![CDATA[ */

with(document.Caprini_form){

var alerted5 = false; var surg_sub1 = 0; var surg_sub2 = 0;

}
/* ]]> */
</script><script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="https://medilib.ir/assets/js/jquery.min.js"></script><script src="https://medilib.ir/assets/js/popper.min.js"></script><script src="https://medilib.ir/assets/js/bootstrap.min.js"></script><script src="https://medilib.ir/assets/js/classy-nav.min.js"></script><script src="https://medilib.ir/assets/js/owl.carousel.min.js"></script><script src="https://medilib.ir/assets/js/jquery.magnific-popup.min.js"></script><script src="https://medilib.ir/assets/js/jquery.counterup.min.js"></script><script src="https://medilib.ir/assets/js/waypoints.min.js"></script><script src="https://medilib.ir/assets/js/form-validator.min.js"></script><script src="https://medilib.ir/assets/js/contact-form-script.js"></script><script src="https://medilib.ir/assets/js/main.js"></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-WFDJ5JLM3Q"></script><script>
    window.addEventListener("load", () => {

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function (registrations) {
                //returns installed service workers
                if (registrations.length) {
                    for (let registration of registrations) {
                        if (
                            registration.active.scriptURL.startsWith("/serviceWorker.js") &&
                            !registration.active.scriptURL.endsWith("/serviceWorker.js?v=18")
                        ) {
                            registration.unregister();
                        }
                    }
                }
            });
            navigator.serviceWorker.register('/serviceWorker.js?v=18', {
                scope: '/'
            })
                .then(function (registration) {
                    console.log('Registration successful, scope is:', registration.scope);
                })
                .catch(function (error) {
                    console.log('Service worker registration failed, error:', error);
                });
        }
    });
    const promptElement = document.querySelector('.pwaprompt');
    const footerPromptElement = document.querySelector('#footerPromptElement');
    const scrollTopElement = document.querySelector('.scrolltop');
    // const installButton = promptElement.querySelector('.prompt__install');
    const closeButton = promptElement.querySelector('.prompt__close');
    let installEvent;

    function setWithExpiry(key, value, seconds) {
        const now = new Date()

        // `item` is an object which contains the original value
        // as well as the time when it's supposed to expire
        const item = {
            value: value,
            expiry: now.getTime() + (seconds * 1000),
        }
        localStorage.setItem(key, JSON.stringify(item))
    }

    function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)
        // if the item doesn't exist, return null
        if (!itemStr) {
            return null
        }
        const item = JSON.parse(itemStr)
        const now = new Date()
        // compare the expiry time of the item with the current time
        if (now.getTime() > item.expiry) {
            // If the item is expired, delete the item from storage
            // and return null
            localStorage.removeItem(key)
            return null
        }
        return item.value
    }

    // checks if the localStorage item has been set
    function getVisited() {
        return getWithExpiry('install-prompt')
        // return localStorage.getItem('install-prompt');
    }

    // sets the localStorage item
    function setVisited() {
        fiveDay = 5 * (24 * (60 * 60))
        setWithExpiry('install-prompt', true, fiveDay)
        // localStorage.setItem('install-prompt', true);
    }

    closeButton.addEventListener('click', () => {
        // set localStorage to true
        setVisited();

        // hide the prompt banner
        promptElement.style.display = 'none';
        scrollTopElement.style.bottom = '30px';

        // installEvent = null;
    });
    // Detects if device is on iOS
    const isIos = () => {
        const userAgent = window.navigator.userAgent.toLowerCase();
        return /iphone|ipad|ipod/.test(userAgent);
    }
    // Detects if device is in standalone mode
    const isInStandaloneMode = () => ('standalone' in window.navigator) && (window.navigator.standalone);

    // Checks if should display install popup notification:
    if (isIos() && !isInStandaloneMode()) {
        if (!getVisited()) {
            promptElement.style.display = 'block';
            scrollTopElement.style.bottom = '80px';
        }
        footerPromptElement.style.display = 'block';
    }


    // this event will only fire if the user does not have the pwa installed
    window.addEventListener('beforeinstallprompt', (event) => {
        event.preventDefault();
        // if no localStorage is set, first time visitor
        if (!getVisited()) {
            // show the prompt banner
            promptElement.style.display = 'block';
            scrollTopElement.style.bottom = '80px';

            // store the event for later use

        }
        footerPromptElement.style.display = 'block';
        installEvent = event;

    });
    $(document).on('click', '.prompt__install', function () {
        promptElement.style.display = 'none';
        scrollTopElement.style.bottom = '30px';

        if (isIos() && !isInStandaloneMode()) {
            setVisited();
            $('#iphoneAddToHomeScreen').modal()
        } else {

            // trigger the prompt to show to the user
            installEvent.prompt();
            // check what choice the user made
            installEvent.userChoice.then((choice) => {
                // if the user declined, we don't want to show the button again
                // set localStorage to true
                if (choice.outcome !== 'accepted') {
                    setVisited();
                }

                installEvent = null;
            });
        }

    });
</script><script>

    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'G-WFDJ5JLM3Q');
</script><script>
      var topicReferences=[];

      function refrence(id) {
          var myReference=Object.values(topicReferences)[id];
          console.log(myReference);
          $("#pmid").attr("href",myReference['pmid']);
          if (typeof myReference['description'] !== 'undefined' && myReference['description']!="") {
            $("#myModalLabel34").html('Description : <p>' + myReference['description'] + "</p>");
          }
          if (typeof myReference['authors'] !== 'undefined' && myReference['authors']!="") {
            $("#referenceAuthors").html('Authors : <p>' + myReference['authors'] + "</p>");
          }
          if (typeof myReference['source'] !== 'undefined' && myReference['source']!="") {
            $("#referenceSource").html('Source : <p>' + myReference['source'] + "</p>");
          }
          if (typeof myReference['title'] !== 'undefined' && myReference['title']!="") {
            $("#referenceTitle").html('Title : <p>' + myReference['title'] + "</p>");
          }
          if (typeof myReference['affiliation'] !== 'undefined' && myReference['affiliation']!="") {
            $("#referenceAffiliation").html('Affiliation : <p>' + myReference['affiliation'] + "</p>");
          }
      }
  </script><script>

      var screenHeight = screen.height;

      if (screenHeight > 700) {
        // $document.getElementById("Uptodate_image").style.width = "100% !important;";
        // $('.Uptodate_image').css('width', '100% !important;');
        console.log("more");
      }else{
        console.log(screenHeight);
      }
    $(document).scroll(function()  {
      var y = $(this).scrollTop();
      if (y > 100) {
        $('.goback').fadeIn();
        $('.buyPackage').fadeIn();
        // alert(document.getElementById('main_menu').style.zIndex);
        document.getElementById("uptodate-area").style.padding = "0px 0 0 0";
        document.getElementById('main_menu').style.zIndex=1;
         document.getElementById('main_menu').style.display="none";
        document.getElementById('navbar_menu').style.marginTop="70px"
        document.getElementById('uptodate-area').style.marginTop="0px"
        document.getElementById('uptodate-area').style.zIndex=999;
        console.log('down');
      } else {
        $('.goback').fadeOut();
        $('.buyPackage').fadeOut();
        document.getElementById("uptodate-area").style.padding = "0px 0 0 0";
        document.getElementById('navbar_menu').style.marginTop="0px"
        document.getElementById('main_menu').style.display="";
        document.getElementById('uptodate-area').style.zIndex=0;
        console.log('up');
      }
    });
    function goBack() {
      window.history.back();
    }
    function buyPackage() {
      window.open("https://medilib.ir/userPanel/package/uptodate/index",'_blank');
    }
  </script></body>
</html>

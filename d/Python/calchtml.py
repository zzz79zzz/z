import os
import requests

# Danh sách tên file đã được lọc
filtered_files = [100996,
101830,
101851,
102399,
103133,
103134,
104842,
105432,
105844,
106379,
107063,
107280,
107378,
109106,
109489,
110695,
111115,
111130,
111610,
111992,
111993,
112092,
112569,
113228,
114029,
114807,
116245,
116419,
116545,
116626,
117273,
118122,
118467,
119558,
119559,
119897,
119945,
120626,
121059,
121355,
121492,
121761,
122272,
123055,
123056,
126050,
126051,
126116,
126351,
126352,
127093,
127179,
127252,
127260,
127855,
130330,
130621,
130641,
130901,
130937,
130938,
131287,
131707,
133140,
13406,
13407,
13408,
13410,
13412,
13413,
13415,
13416,
13417,
13421,
13422,
13423,
13424,
13425,
13428,
13429,
13430,
13432,
13434,
13436,
13437,
13440,
13443,
13445,
13446,
13447,
13448,
13449,
13450,
13452,
13453,
13454,
13455,
13456,
13457,
13458,
13459,
13460,
13461,
13462,
13463,
13465,
13466,
13467,
13468,
13469,
13473,
13474,
13475,
13477,
13478,
13483,
13484,
13485,
13486,
13487,
13488,
13489,
13492,
13493,
13494,
13495,
13496,
13497,
13498,
13499,
13500,
13501,
13502,
13503,
13505,
135160,
135237,
139613,
139614,
139615,
139616,
140668,
140834,
140980,
141067,
141068,
141147,
141330,
141331,
141489,
141743,
141835,
142813,
142838,
142841,
143344,
143562,
143563,
143810,
143811,
15322,
15607,
15628,
15630,
15631,
15632,
15633,
15635,
15636,
15637,
15638,
15639,
15640,
15641,
15642,
15644,
15645,
15646,
15650,
15651,
15652,
15654,
15658,
15661,
15922,
16104,
16316,
16342,
16436,
16498,
16499,
16743,
16744,
16745,
16746,
16931,
83044,
83268,
83750,
85970,
87307,
89706,
89707,
89888,
89889,
90337,
90339,
90389,
90441,
91350,
91697,
93339,
93393,
93496,
93498,
94104,
94386,
95017,
95018,
95019,
95711,
95712,
95866,
97114,
97683,
98369,
99815,]  # Thay [...] bằng danh sách tên file đã được lọc

# Đường dẫn đến thư mục muốn lưu file
save_dir = r"C:\Users\mayde\Desktop\calc html"

# Đảm bảo thư mục tồn tại
os.makedirs(save_dir, exist_ok=True)

# Duyệt qua từng file trong danh sách
for file in filtered_files:
    # Tạo URL
    url = f"https://medilib.ir/uptodate/show/{file}"

    # Gửi yêu cầu GET đến URL
    response = requests.get(url)

    # Kiểm tra nếu yêu cầu thành công
    if response.status_code == 200:
        # Tạo đường dẫn đến file sẽ lưu
        file_path = os.path.join(save_dir, f"{file}.html")

        # Ghi nội dung trả về vào file
        with open(file_path, 'w', encoding='utf-8') as f:
            f.write(response.text)
